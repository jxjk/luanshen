# PDF 导出功能说明

## 功能概述

工艺参数优化系统现在支持将优化结果导出为格式化的 PDF 报告，包含完整的机床、刀具、材料、策略信息和优化建议。

## 使用方法

1. **执行参数优化**
   - 在参数优化页面选择材料、刀具、设备和策略
   - 点击"开始优化"按钮
   - 等待优化完成

2. **导出 PDF 报告**
   - 优化完成后，点击"导出 PDF"按钮
   - 系统将自动生成并下载 PDF 文件
   - 文件名格式：`优化报告_YYYY-MM-DDTHH-mm-ss.pdf`

## PDF 报告内容

### 1. 报告标题
- 报告名称：工艺参数优化报告
- 生成时间：自动记录

### 2. 项目说明
- 加工方法（铣削、车削、钻孔、镗孔）
- 材料类型
- 刀具规格
- 优化目标说明

### 3. 优化结果摘要
包含 6 个核心参数的网格展示：
- 转速 (r/min)
- 进给量 (mm/min)
- 切深 (mm)
- 切宽 (mm)
- 线速度 (m/min)
- 每齿进给 (mm)

材料去除率以绿色背景突出显示。

### 4. 加工参数配置
详细展示选中的：
- **材料信息**：名称、材料组、抗拉强度、单位切削力
- **刀具信息**：名称、类型、直径、齿数、刀尖半径
- **设备信息**：名称、类型、功率、最大转速、最大扭矩、效率
- **策略信息**：名称、类型、最小刀具寿命、切宽、粗糙度要求

### 5. 性能指标
- 功率 (Kw)
- 扭矩 (Nm)
- 进给力 (N)
- 刀具寿命 (min)
- 底面粗糙度 (μm)
- 侧面粗糙度 (μm)

### 6. 约束使用情况
以进度条形式展示各约束的使用率：
- 绿色：使用率 ≤ 80%
- 橙色：80% < 使用率 ≤ 95%
- 红色：使用率 > 95%

约束包括：
- 功率约束
- 扭矩约束
- 进给约束
- 刀具寿命约束
- 最大每齿进给
- 最大线速度

### 7. 优化建议
系统根据优化结果自动生成建议：
- 基于约束使用率的建议
- 基于材料去除率的建议
- 默认安全建议

### 8. 免责声明
提醒用户优化参数仅供参考，实际加工时需要根据具体情况进行调整。

### 9. 页脚信息
- 页码
- 系统版本
- 生成时间

## 技术实现

### 前端
- **PDF 生成库**：jsPDF
- **依赖**：html2canvas（用于高级功能）
- **服务**：`frontend/src/services/pdfService.ts`

### 后端
- **优化算法**：微生物遗传算法（MGA）
- **日志记录**：优化过程详细日志
- **早停机制**：连续无改进时提前终止

## 优化建议示例

### 高功率使用率
> 功率使用率较高，建议监控机床负载，避免过载运行。

### 高扭矩使用率
> 扭矩接近上限，建议降低切深或减小每齿进给。

### 刀具寿命较短
> 刀具寿命较短，建议优化冷却条件或适当降低切削参数。

### 材料去除率低
> 材料去除率较低，可以考虑优化切削参数以提高效率。

### 材料去除率高
> 材料去除率较高，注意监测刀具磨损和工件质量。

## 注意事项

1. **浏览器兼容性**
   - 推荐使用 Chrome、Edge、Firefox 最新版本
   - 不支持 IE 浏览器

2. **PDF 文件大小**
   - 单页报告约 50-100 KB
   - 多页报告自动分页

3. **文件名编码**
   - 文件名使用时间戳，避免重名
   - 支持中文字符

4. **打印建议**
   - 推荐使用 A4 纸张打印
   - 建议彩色打印以更好地显示约束使用情况

## 未来扩展

计划添加的功能：
- [ ] 自定义报告模板
- [ ] 多语言支持
- [ ] 图表可视化（约束使用趋势图）
- [ ] 批量导出
- [ ] 邮件发送功能
- [ ] 报告历史记录

## 技术支持

如遇到问题，请：
1. 检查浏览器控制台错误信息
2. 查看后端服务日志
3. 确认网络连接正常
4. 联系技术支持团队

---

**版本**：v1.0.0  
**更新日期**：2026-02-03  
**维护团队**：工艺数字孪生项目组